(()=>{var e={};e.id=888,e.ids=[888],e.modules={3059:(e,r,t)=>{"use strict";t.d(r,{Z:()=>n});var s=t(997),i=t(6689),a=t.n(i);class o extends a().Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){console.error("Error caught by ErrorBoundary:",e,r),this.setState({errorInfo:r})}render(){return this.state.hasError?(0,s.jsxs)("div",{className:"error-boundary",children:[s.jsx("h2",{children:"Something went wrong"}),this.state.error&&this.state.error.message&&s.jsx("p",{className:"error-message",children:this.state.error.message.includes("Firebase")?"Firebase initialization error. Please check your configuration.":this.state.error.message}),s.jsx("div",{className:"error-actions",children:s.jsx("button",{onClick:()=>window.location.reload(),children:"Refresh Page"})})]}):this.props.children}}let n=o},3161:(e,r,t)=>{"use strict";t.a(e,async(e,s)=>{try{t.d(r,{H:()=>d,a:()=>h});var i=t(997),a=t(6689),o=t(8798),n=t(4578),l=t(1634),c=e([o,n,l]);[o,n,l]=c.then?(await c)():c;let m=new o.hJ;async function u(e){if(!e)return!1;let r="admin@example.com,solid.garden.dev@gmail.com,test@test.test".split(",").map(e=>e.trim().toLowerCase());if(r.includes(e.email.toLowerCase()))return!0;if(!l.N$)return console.error("Firebase Firestore not initialized"),!1;try{let r=(0,n.doc)(l.N$,"users",e.uid),t=await (0,n.getDoc)(r);if(t.exists()&&"admin"===t.data().role)return!0}catch(e){console.error("Error checking admin status:",e)}return!1}let p=(0,a.createContext)(null);function d({children:e}){let[r,t]=(0,a.useState)(null),[s,c]=(0,a.useState)(!0),[d,h]=(0,a.useState)(!1),[g,f]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(!l.lX)return console.error("Firebase auth not initialized"),c(!1),f("Firebase authentication failed to initialize"),()=>{};(0,o.cx)(l.lX).then(e=>{e?.user&&console.log("Redirect sign-in successful")}).catch(e=>{console.error("Redirect sign-in error:",e),f(e.message)});let e=(0,o.Aj)(l.lX,async e=>{if(e){t(e);let r=await u(e);if(h(r),!l.N$){console.error("Firebase Firestore not initialized"),c(!1);return}try{let r=(0,n.doc)(l.N$,"users",e.uid);await (0,n.setDoc)(r,{email:e.email,displayName:e.displayName,photoURL:e.photoURL,lastLogin:(0,n.serverTimestamp)()},{merge:!0})}catch(e){console.error("Error saving user data:",e)}}else t(null),h(!1);c(!1)});return()=>e()},[]);let b=async(e,r)=>{if(!l.lX)throw Error("Firebase auth not initialized");try{let t=await (0,o.e5)(l.lX,e,r);return t.user}catch(e){throw console.error("Email login error:",e),f(e.message),e}},w=async(e=!1)=>{if(!l.lX)throw Error("Firebase auth not initialized");try{if(e)return await (0,o.F6)(l.lX,m),null;{let e=await (0,o.rh)(l.lX,m);return e.user}}catch(e){throw console.error("Google login error:",e),f(e.message),e}},x=async()=>{if(!l.lX)throw Error("Firebase auth not initialized");try{await (0,o.w7)(l.lX)}catch(e){throw console.error("Logout error:",e),f(e.message),e}};return i.jsx(p.Provider,{value:{user:r,loading:s,isAdmin:d,loginWithEmail:b,loginWithGoogle:w,logout:x,authError:g},children:e})}function h(){let e=(0,a.useContext)(p);if(null===e)throw Error("useAuth must be used within an AuthProvider");return e}s()}catch(e){s(e)}})},1634:(e,r,t)=>{"use strict";t.a(e,async(e,s)=>{try{let u;t.d(r,{N$:()=>g,lX:()=>p});var i=t(6588),a=t(8798),o=t(4578),n=t(7972),l=t(8074),c=e([i,a,o,n,l]);[i,a,o,n,l]=c.then?(await c)():c;let d={apiKey:"demo-api-key",authDomain:"127.0.0.1",projectId:"geobit-dev",storageBucket:"geobit-dev.appspot.com",messagingSenderId:"518824678195",appId:"1:518824678195:web:dbd647fbe88edfd4fa6446",measurementId:process.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID,databaseURL:"https://geobit-dev-default-rtdb.firebaseio.com"};try{u=(0,i.getApps)().length?(0,i.getApps)()[0]:(0,i.initializeApp)(d)}catch(e){throw console.error("Error initializing Firebase:",e),Error("Failed to initialize Firebase. Check your environment variables.")}let h=(0,a.v0)(u),m=(0,o.getFirestore)(u);(0,n.getFunctions)(u,"us-central1"),(0,l.getDatabase)(u);let p=h,g=m;s()}catch(e){s(e)}})},8397:(e,r,t)=>{"use strict";t.a(e,async(e,s)=>{try{t.r(r),t.d(r,{default:()=>u});var i=t(997);t(108),t(8819);var a=t(3590),o=t(6689),n=t(3161),l=t(3059),c=e([a,n]);function u({Component:e,pageProps:r}){(0,o.useEffect)(()=>()=>{},[]);let t=e.getLayout||(e=>e);return i.jsx(l.Z,{children:(0,i.jsxs)(n.H,{children:[t(i.jsx(e,{...r})),i.jsx(a.ToastContainer,{position:"bottom-right"})]})})}[a,n]=c.then?(await c)():c,s()}catch(e){s(e)}})},108:()=>{},6689:e=>{"use strict";e.exports=require("react")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},72:e=>{"use strict";e.exports=import("@firebase/app")},5157:e=>{"use strict";e.exports=import("@firebase/component")},628:e=>{"use strict";e.exports=import("@firebase/database")},1401:e=>{"use strict";e.exports=import("@firebase/firestore")},1546:e=>{"use strict";e.exports=import("@firebase/functions")},4145:e=>{"use strict";e.exports=import("@firebase/logger")},2527:e=>{"use strict";e.exports=import("@firebase/util")},3590:e=>{"use strict";e.exports=import("react-toastify")},1395:e=>{"use strict";e.exports=import("tslib")}};var r=require("../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[363],()=>t(8397));module.exports=s})();